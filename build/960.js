"use strict";(self.webpackChunkservv_plugin=self.webpackChunkservv_plugin||[]).push([[960],{6477:(e,t,l)=>{l.d(t,{A:()=>s}),l(1609);var a=l(790);const s=({gap:e=4,cardsLayout:t,action:l,disabled:s,onAction:n,className:o="",children:i,...r})=>(0,a.jsx)("div",{...r,onClick:n?()=>n():void 0,className:`${o} flex flex-col ${e?`space-y-${e}`:""} ${t?"flex-[1_1_0]":""} ${l?"cursor-pointer":""} ${s?"filter grayscale":""}`,children:i})},3350:(e,t,l)=>{l.d(t,{A:()=>s}),l(1609);var a=l(790);const s=e=>{const{className:t="",children:l,...s}=e;return(0,a.jsx)("div",{...s,className:`page-content ${t}`,children:l})}},4102:(e,t,l)=>{l.d(t,{A:()=>s}),l(1609);var a=l(790);const s=e=>{const{className:t="",bottomLine:l,children:s,...n}=e;return(0,a.jsx)("div",{...n,className:`page-header ${l?"border-b pb-4":""} ${t}`,children:s})}},8367:(e,t,l)=>{l.d(t,{A:()=>s});var a=l(790);const s=({tabsList:e,selected:t,handleSelectChange:l,fullWidth:s})=>(0,a.jsx)("div",{className:"tabs-group-container",style:{overflowX:"auto",WebkitOverflowScrolling:"touch",width:"100%",marginBottom:16},children:(0,a.jsx)("ul",{className:"flex flex-row servv-tabs",style:{flexWrap:"nowrap",minWidth:"100%",width:"max-content",marginBottom:0},children:e.map((e=>(0,a.jsx)("li",{style:{flex:"0 0 auto",minWidth:120},children:(0,a.jsx)("button",{onClick:()=>l(e.value),className:"tab-element "+(t===e.value?"tab-active":""),style:{minWidth:120,whiteSpace:"nowrap",flex:"0 0 auto"},children:e.label})},e.value)))})})},5005:(e,t,l)=>{l.d(t,{A:()=>s}),l(1609);var a=l(790);const s=({text:e,icon:t,type:l,onAction:s,disabled:n=!1,className:o="",style:i={}})=>(0,a.jsxs)("button",{onClick:s,disabled:n,className:`\n        flex items-center justify-center px-4 py-2 rounded-lg\n        font-medium text-sm transition-colors duration-200\n        ${"primary"===l?"bg-purple-600 text-white hover:bg-purple-700 focus:ring-2 focus:ring-purple-200":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-2 focus:ring-gray-200"}\n        ${n?"opacity-50 cursor-not-allowed":""}\n        ${o}\n      `,style:{fontFamily:"'Inter', sans-serif",...i},children:[t&&(0,a.jsx)("span",{className:"mr-2",children:t}),e]})},3547:(e,t,l)=>{l.d(t,{A:()=>n});var a=l(1609),s=l(790);const n=({label:e="",options:t=[],helpText:l="",selected:n=null,disabled:o=!1,onSelectChange:i=()=>{},iconRight:r=null,iconLeft:c=null,style:d={}})=>{const m={maxWidth:"100%",width:"100%",boxSizing:"border-box",...d};return(0,s.jsxs)("div",{className:"input-container-col",style:{width:"100%"},children:[(0,s.jsx)("label",{htmlFor:"timezone",className:"section-description",children:e}),(0,s.jsxs)("div",{className:"select-control-with-icon-container",style:{width:"100%"},children:[(0,s.jsx)("select",{name:"timezone",id:"timezone-select",className:"select-control select-control-with-icon text-sm p-4",value:n,onChange:e=>i(e.target.value),disabled:o,style:m,children:(()=>{if(t.length>0)return(0,s.jsxs)(a.Fragment,{children:[l.length>0&&(0,s.jsx)("option",{value:"",disabled:!0,selected:!n,children:l},""),t.map((e=>(0,s.jsx)("option",{value:e,selected:n===e,children:e},e)))]})})()}),null!==r&&r]})]})}},320:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(3592),s=l(790);const n={display:"block",margin:"0 auto"},o=({loading:e,color:t="#7319C6"})=>(0,s.jsx)("div",{className:"svv-sweet-loading",children:(0,s.jsx)(a.A,{color:t,loading:e,cssOverride:n,size:75,"aria-label":"Loading Spinner","data-testid":"loader"})})},2960:(e,l,a)=>{a.r(l),a.d(l,{default:()=>w});var s=a(7536),n=a(1609),o=a(3980),i=a(3350),r=a(4102),c=a(8367),d=a(6477),m=a(5571),u=a(3547),f=a(5005),x=a(5739),h=a(3049);a(6067);var v=a(4743),g=a.n(v),p=a(790);const w=()=>{const[e,l]=(0,n.useState)(!1),[a,v]=(0,n.useState)(0),[w,j]=(0,n.useState)(null),[y,b]=(0,n.useState)({}),[N,A]=(0,n.useState)(null),[S,C]=(0,n.useState)(null),[D,_]=(0,n.useState)(0),[E,$]=(0,n.useState)(""),[z,F]=(0,n.useState)(""),[W,Y]=(0,n.useState)(!1),[k,L]=(0,n.useState)(null),[M,X]=(0,n.useState)(null),[O,P]=(0,n.useState)(null),[R,q]=(0,n.useState)({startDate:null,endDate:null}),B=async(e=null,t=null)=>{l(!0);try{let l="/wp-json/servv-plugin/v1/analytics/revenue";e&&t&&(l+=`?from=${e}&to=${t}`);const a=await s.A.get(l,{headers:{"X-WP-Nonce":servvData.nonce}});a&&a.data&&(e||t?j(a.data.total||0):v(a.data.total||0))}catch(e){console.error("Error fetching revenue",e)}l(!1)},J=async(e=null)=>{l(!0);try{let t="/wp-json/servv-plugin/v1/analytics/registrants";(W||e)&&(t+=`?date_year=${z}&date_month=${K.indexOf(E)}`);const l=await s.A.get(t,{headers:{"X-WP-Nonce":servvData.nonce}});l&&l.data&&(W||e?A(l.data):C(l.data))}catch(e){console.error("Error fetching registrants",e)}l(!1)};(0,n.useEffect)((()=>{W&&(1===D&&J(!0),3===D&&T(!0))}),[W,E,z]);const T=async e=>{l(!0);let t="/wp-json/servv-plugin/v1/analytics/types";(W||e)&&(t+=`?date_year=${z}&date_month=${K.indexOf(E)}`);const a=await s.A.get(t,{headers:{"X-WP-Nonce":servvData.nonce}}).catch((e=>console.log(e)));return a?(W||e?P(a.data):X(a.data),l(!1),a):(l(!1),null)},H=e=>{""!==e&&($(e),""===z&&F((new Date).getFullYear()))},I=e=>{""!==e&&(F(e),""===E&&$(K[1]))},G=(e,l)=>(0,p.jsxs)("div",{className:"w-full md:w-1/2 lg:w-1/3 flex flex-col gap-4 min-w-0",children:[(0,p.jsx)("h2",{className:"font-semibold text-gray-700 text-lg border-b pb-2",children:e}),(0,p.jsx)("div",{className:"w-full h-64 md:h-80 lg:h-96 min-w-0",children:l?(0,p.jsx)(x.rW1,{id:e.toLowerCase(),height:"100%",data:l,series:(0,p.jsx)(x.OLs,{colorScheme:["#B692F6","#7319C6","#8217E5","#9D49EC"]})}):(0,p.jsxs)("p",{className:"text-gray-500",children:[t("No data available for"),e.toLowerCase(),t(".")]})})]});(0,n.useEffect)((()=>{R.startDate&&R.endDate&&B(g()(R.startDate).format("YYYY-MM-DD"),g()(R.endDate).format("YYYY-MM-DD"))}),[R]);(0,n.useEffect)((()=>{(async()=>{await B(),await(async()=>{l(!0);try{const e=await s.A.get("/wp-json/servv-plugin/v1/shop/info",{headers:{"X-WP-Nonce":servvData.nonce}});200===e.status&&b(e.data)}catch(e){console.error("Failed to fetch settings",e)}l(!1)})()})()}),[]);const K=["","January","February","March","April","May","June","July","August","September","October","November","December"],Q=["",2025,2026,2027],{unique:U,total:V}=(()=>{let e={unique:0,total:0};const t=W?N:S;return t&&(e=Object.values(t).reduce(((e,t)=>(e.unique+=t.unique,e.total+=t.total,e)),{unique:0,total:0})),e})();return(0,p.jsxs)(o.A,{loading:e,children:[(0,p.jsx)(r.A,{children:(0,p.jsxs)(d.A,{children:[(0,p.jsx)("h1",{className:"text-display-sm mt-6",children:t("Analytics")}),(0,p.jsx)("p",{className:"page-header-description",children:"Access analytics for your revenue, registrants, events, and filters"})]})}),(0,p.jsx)(i.A,{children:(0,p.jsxs)(d.A,{gap:8,cardsLayout:!0,className:"w-full min-w-0",children:[(0,p.jsx)("div",{className:"w-full min-w-0 overflow-x-auto",children:(0,p.jsx)(c.A,{tabsList:[{label:"Total Revenue",value:0},{label:"Total Registrants",value:1},{label:"Events",value:2},{label:"Filters",value:3}],selected:D,handleSelectChange:e=>{_(e),1!==e||S||(Y(!1),$(""),F(""),J()),2!==e||k||(async()=>{l(!0);let e=k?{...k}:{};try{const t=await s.A.get("/wp-json/servv-plugin/v1/analytics/happened",{headers:{"X-WP-Nonce":servvData.nonce}});t&&t.data&&(e={...e,happened:t.data});const l=await s.A.get("/wp-json/servv-plugin/v1/analytics/cancelled",{headers:{"X-WP-Nonce":servvData.nonce}});l&&l.data&&(e={...e,cancelled:l.data});const a=await s.A.get("/wp-json/servv-plugin/v1/analytics/active",{headers:{"X-WP-Nonce":servvData.nonce}});a&&a.data&&(e={...e,active:a.data}),L(e)}catch(e){console.error("Error fetching events analytics",e)}l(!1)})(),3!==e||M||(Y(!1),$(""),F(""),T())},fullWidth:!0})}),0===D&&(0,p.jsxs)(d.A,{gap:8,className:"w-full min-w-0",children:[(0,p.jsx)("div",{className:"flex flex-col md:flex-row justify-end items-end min-w-0 w-full",children:(0,p.jsx)("div",{className:"w-full md:w-72",children:(0,p.jsx)(h.A,{displayFormat:"MMM DD, YYYY",value:R,placeholder:"Select Dates",inputClassName:"input-control section-description text-left w-full shadow-sm border-solid border border-gray-300 bg-white",onChange:e=>q(e)})})}),(0,p.jsx)("div",{className:"w-full h-64 md:h-80 bg-gradient-to-b from-transparent to-[#ECE4F6] rounded-lg flex flex-col items-center justify-center min-w-0",children:(0,p.jsxs)("div",{className:"flex flex-col items-center justify-start",children:[(0,p.jsx)("h2",{className:"font-semibold text-brand-700 text-display-md",children:(0,p.jsx)(x.y_o,{from:0,to:R.startDate?w||0:a||0,className:"font-semibold text-brand-700 text-display-md"})}),0===a&&(0,p.jsx)("p",{children:t("You haven’t made any Sales yet.")})]})})]}),1===D&&(0,p.jsxs)(d.A,{gap:8,className:"w-full min-w-0",children:[(0,p.jsxs)(m.A,{gap:4,className:"flex-col sm:flex-row w-full items-start min-w-0",children:[(0,p.jsx)("div",{className:"w-full sm:w-48",children:(0,p.jsx)(u.A,{options:K,selected:E,onSelectChange:e=>{H(e),Y(!0)}})}),(0,p.jsx)("div",{className:"w-full sm:w-48",children:(0,p.jsx)(u.A,{options:Q,selected:z,onSelectChange:e=>{I(e),Y(!0)}})}),(0,p.jsx)(f.A,{text:"Reset",icon:null,type:"primary",className:"p-3 self-center w-full sm:w-auto",onAction:()=>{Y(!1),$(""),F("")}})]}),(0,p.jsxs)("div",{className:"w-full h-64 md:h-80 bg-gradient-to-b from-transparent to-[#ECE4F6] rounded-lg flex flex-col items-center justify-center min-w-0",children:[(0,p.jsxs)("h2",{className:"font-semibold text-brand-700 text-3xl",children:[(0,p.jsx)(x.y_o,{from:0,to:U+V,className:"font-semibold"})," Registrants"]}),U+V===0&&(0,p.jsx)("p",{className:"text-gray-500 mt-2",children:t("You don’t have any Registrants yet.")})]})]}),2===D&&(0,p.jsx)(p.Fragment,{children:k?(0,p.jsxs)("div",{className:"w-full h-64 bg-gradient-to-b from-transparent to-[#ECE4F6] rounded-lg flex flex-col md:flex-row items-center justify-between p-4 md:p-8 gap-4 min-w-0",children:[(0,p.jsxs)("div",{className:"w-full md:w-1/3 flex flex-col items-center gap-2 min-w-0",children:[(0,p.jsx)("h2",{className:"font-semibold text-brand-700 text-lg",children:t("Active Events")}),(0,p.jsx)(x.y_o,{from:0,to:k?.active?k.active.offline+k.active.online_zoom:0,className:"font-semibold text-brand-700 text-3xl"})]}),(0,p.jsxs)("div",{className:"w-full md:w-1/3 flex flex-col items-center gap-2 min-w-0",children:[(0,p.jsx)("h2",{className:"font-semibold text-brand-700 text-lg",children:t("Events Happened")}),(0,p.jsx)(x.y_o,{from:0,to:k?.happened?k.happened.offline+k.happened.online_zoom:0,className:"font-semibold text-brand-700 text-3xl"})]}),(0,p.jsxs)("div",{className:"w-full md:w-1/3 flex flex-col items-center gap-2 min-w-0",children:[(0,p.jsx)("h2",{className:"font-semibold text-brand-700 text-lg",children:t("Events Cancelled")}),(0,p.jsx)(x.y_o,{from:0,to:k?.cancelled?k.cancelled.offline+k.cancelled.online_zoom:0,className:"font-semibold text-brand-700 text-3xl"})]})]}):(0,p.jsx)("div",{className:"w-full h-64 flex items-center justify-center text-gray-500 min-w-0",children:t("No event analytics to display.")})}),3===D&&(0,p.jsxs)(d.A,{gap:8,className:"w-full min-w-0",children:[(0,p.jsxs)(m.A,{gap:4,className:"flex-col sm:flex-row w-full min-w-0",children:[(0,p.jsx)("div",{className:"w-full sm:w-48",children:(0,p.jsx)(u.A,{options:K,selected:E,onSelectChange:e=>{H(e),Y(!0)}})}),(0,p.jsx)("div",{className:"w-full sm:w-48",children:(0,p.jsx)(u.A,{options:Q,selected:z,onSelectChange:e=>{I(e),Y(!0)}})}),(0,p.jsx)(f.A,{text:"Reset",icon:null,type:"primary",className:"p-[0.75rem] self-end w-full sm:w-auto",onAction:()=>{Y(!1),$(""),F("")}})]}),M&&(()=>{const e=(()=>{const e=null!==W?M:O;if(!e||!e.offline||!e.online_zoom)return null;const t=e.offline.members.map((e=>e.name)).map((t=>{const l=e.offline.members.find((e=>e.name===t)),a=e.online_zoom.members.find((e=>e.name===t));return{key:t,data:(l?.value||0)+(a?.value||0)}}));return t.some((e=>e.data>0))?t:null})(),l=(()=>{const e=null!==W?M:O;if(!e||!e.offline||!e.online_zoom)return null;const t=e.offline.locations.map((e=>e.name)).map((t=>{const l=e.offline.locations.find((e=>e.name===t)),a=e.online_zoom.locations.find((e=>e.name===t));return{key:t,data:(l?.value||0)+(a?.value||0)}}));return t.some((e=>e.data>0))?t:null})(),a=(()=>{const e=null!==W?M:O;if(!e||!e.offline||!e.online_zoom)return null;const t=e.offline.languages.map((e=>e.name)).map((t=>{const l=e.offline.languages.find((e=>e.name===t)),a=e.online_zoom.languages.find((e=>e.name===t));return{key:t,data:(l?.value||0)+(a?.value||0)}}));return t.some((e=>e.data>0))?t:null})(),s=(()=>{const e=null!==W?M:O;if(!e||!e.offline||!e.online_zoom)return null;const t=e.offline.categories.map((e=>e.name)).map((t=>{const l=e.offline.categories.find((e=>e.name===t)),a=e.online_zoom.categories.find((e=>e.name===t));return{key:t,data:(l?.value||0)+(a?.value||0)}}));return t.filter((e=>e.data>0)).length>0?t:null})();return(0,p.jsxs)(n.Fragment,{children:[(0,p.jsxs)("div",{className:"flex flex-col md:flex-row flex-wrap gap-8 w-full min-w-0",children:[s&&G(t("Categories"),s),l&&G(t("Locations"),l),a&&G(t("Languages"),a),e&&G(t("Members"),e)]}),!e&&!l&&!a&&!s&&(0,p.jsx)("div",{className:"w-full h-64 bg-gradient-to-b from-transparent to-[#ECE4F6] rounded-lg flex flex-col items-center justify-center",children:(0,p.jsx)("div",{className:"flex flex-col items-center justify-start",children:(0,p.jsx)("p",{children:t("You don’t have Filter Statistics yet.")})})})]})})()]})]})})]})}},3980:(e,t,l)=>{l.d(t,{A:()=>o});var a=l(1409),s=l(320),n=l(790);const o=e=>(0,n.jsxs)("div",{className:"w-full relative",children:[(0,n.jsx)("div",{className:"absolute top-[50vh] left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:e.loading&&(0,n.jsx)(s.A,{loading:!0})}),(0,n.jsxs)("div",{className:"flex flex-col flex-1 h-full w-full pl-4 md:pl-6 lg:pl-8 pr-4 max-w-full min-w-0 overflow-visible "+(e.loading?"loading":""),children:[(0,n.jsx)(a.N9,{position:"bottom-right"}),e.children]})]})}}]);