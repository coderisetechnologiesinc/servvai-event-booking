{"version":3,"file":"src_Components_BillingStep_jsx.js?ver=73a2e4f27f113ec9b064","mappings":"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D,iEAAe,UAAU;;;;;;;;;;;;;;ACzBzB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wIAAwI;;AAExI;AACA;AACA;;AAEA;AACA;;AAEA,kBAAkB,oBAAoB;AACtC;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,QAAQ;AACR;;AAEA;AACA;AACA,8DAA8D;AAC9D;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,GAAG,GAAG;;AAEN;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA,wCAAwC;;AAExC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;;AAGA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,CAAC;AACD;AACA,sEAAsE,aAAa;AACnF;AACA;;AAEA;AACA,8BAA8B;;AAE9B;AACA;AACA,GAAG;AACH;;AAEsB;;;;;;;;;;;;;;;;ACnMY","sources":["webpack://servv-plugin/./src/Components/BillingStep.jsx","webpack://servv-plugin/./src/Components/Pages/SpinnerLoader.jsx","webpack://servv-plugin/./node_modules/@heroicons/react/24/outline/esm/CheckCircleIcon.js","webpack://servv-plugin/./node_modules/@heroicons/react/24/outline/esm/XCircleIcon.js","webpack://servv-plugin/./node_modules/@stripe/stripe-js/dist/index.mjs","webpack://servv-plugin/./node_modules/@stripe/stripe-js/lib/index.mjs"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { toast } from \"react-toastify\";\nimport { loadStripe } from \"@stripe/stripe-js\";\n\nimport {\n  CreditCardIcon,\n  CheckCircleIcon,\n  XCircleIcon,\n} from \"@heroicons/react/24/outline\";\nimport ModalShell from \"./ModalShell\";\nimport SpinnerLoader from \"./Pages/SpinnerLoader\";\n\nconst BillingStep = ({\n  attributes,\n  setAttributes,\n  goToNextStep,\n  goToPreviousStep,\n  onSave,\n  loading: parentLoading,\n  settings,\n}) => {\n  const [billingPlans, setBillingPlans] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [showPaymentForm, setShowPaymentForm] = useState(false);\n  const [showPaymentOptionsModal, setShowPaymentOptionsModal] = useState(false);\n  const [selectedPlan, setSelectedPlan] = useState(null);\n  const [stripeForm, setStripeForm] = useState(null);\n\n  useEffect(() => {\n    getBillingPlans();\n  }, []);\n\n  const getBillingPlans = async () => {\n    setLoading(true);\n    const response = await axios(\"/wp-json/servv-plugin/v1/shop/paymentplans\", {\n      headers: { \"X-WP-Nonce\": servvData.nonce },\n    }).catch(() => toast(\"Unable to fetch billing plans.\"));\n\n    if (response?.status === 200) {\n      setBillingPlans(response.data.plans);\n    }\n    setLoading(false);\n  };\n\n  const activateBillingPlan = async (id, isAnnual = false) => {\n    setLoading(true);\n    setShowPaymentOptionsModal(false);\n\n    const response = await axios({\n      method: \"POST\",\n      url: `/wp-json/servv-plugin/v1/shop/paymentplans/${id}`,\n      headers: { \"X-WP-Nonce\": servvData.nonce },\n      data: { is_annual: isAnnual },\n    }).catch(() => {\n      toast(\"Unable to activate billing plan.\");\n      setLoading(false);\n    });\n\n    if (response?.status === 200) {\n      const { client_secret, public_key } = response.data;\n      const stripe = await loadStripe(public_key);\n\n      const handleComplete = async () => {\n        checkout.destroy();\n        toast(\"Your billing plan has been successfully activated.\");\n        setShowPaymentForm(false);\n        setAttributes({ planActivated: true, planId: id });\n      };\n\n      const checkout = await stripe.initEmbeddedCheckout({\n        clientSecret: client_secret,\n        onComplete: handleComplete,\n      });\n\n      setShowPaymentForm(true);\n      checkout.mount(\"#servv-billing-payment-element\");\n      setStripeForm(checkout);\n    }\n    setLoading(false);\n  };\n\n  const showPaymentOptions = (plan) => {\n    setSelectedPlan(plan);\n    setShowPaymentOptionsModal(true);\n  };\n\n  const handleContinue = () => {\n    onSave({\n      ...attributes,\n    });\n  };\n\n  const activePlanId = settings?.current_plan?.id || 1;\n\n  return (\n    <div className=\"step__wrapper w-full\">\n      {/* Header */}\n      <div className=\"step__header\">\n        <CreditCardIcon className=\"step__header_icon settings-icon\" />\n        <div className=\"step__heading\">\n          <h4 className=\"step__header_title\">Choose a Plan</h4>\n          <p className=\"step__description\">\n            Select the plan that best fits your needs.\n          </p>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className={`step__content w-full`}>\n        <div className=\"flex flex-col gap-y-[24px] mb-[30px]\">\n          {!showPaymentForm ? (\n            <SpinnerLoader\n              isLoading={loading && !billingPlans}\n              customStyling=\"top-[30px]\"\n            >\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                {billingPlans?.map((plan) => {\n                  const isCurrent = activePlanId === plan.id;\n                  const isUpgradeable = plan.id > (activePlanId || 0);\n\n                  return (\n                    <div\n                      key={plan.id}\n                      className={`flex flex-col h-full rounded-lg border ${\n                        isCurrent\n                          ? \"border-brand-500 bg-brand-50\"\n                          : \"border-gray-200 bg-white\"\n                      } p-lg`}\n                    >\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div>\n                          <h2 className=\"text-lg font-semibold text-gray-900\">\n                            {plan.name}\n                          </h2>\n                          <div className=\"mt-1 min-h-[1.25rem] flex flex-wrap items-center gap-2 text-sm text-gray-600\">\n                            {(plan.price > 0 || plan.price_annual > 0) && (\n                              <span>\n                                {plan.price > 0\n                                  ? `$${plan.price}/mo`\n                                  : `$${plan.price_annual}/yr`}\n                              </span>\n                            )}\n                            {plan.application_fee_percent > 0 && (\n                              <span>· {plan.application_fee_percent}% fee</span>\n                            )}\n                          </div>\n                        </div>\n                        {isCurrent && (\n                          <span className=\"text-xs font-semibold text-brand-700 bg-brand-100 px-2 py-1 rounded-full\">\n                            Current\n                          </span>\n                        )}\n                      </div>\n\n                      <ul className=\"mt-4 space-y-2\">\n                        {plan.features?.map((feature, index) => (\n                          <li key={index} className=\"flex items-start gap-2\">\n                            {feature.value === \"true\" ? (\n                              <CheckCircleIcon className=\"w-5 h-5 text-success-600 shrink-0\" />\n                            ) : (\n                              <XCircleIcon className=\"w-5 h-5 text-error-600 shrink-0\" />\n                            )}\n                            <span className=\"text-sm text-gray-700\">\n                              {feature.title}\n                            </span>\n                          </li>\n                        ))}\n                      </ul>\n\n                      <div className=\"mt-auto pt-6\">\n                        {isCurrent ? (\n                          <span className=\"block w-full text-center text-sm font-semibold text-brand-700\">\n                            Active Plan\n                          </span>\n                        ) : (\n                          isUpgradeable && (\n                            <button\n                              type=\"button\"\n                              className=\"servv_button servv_button--primary w-full\"\n                              onClick={() => showPaymentOptions(plan)}\n                              disabled={loading}\n                            >\n                              Activate\n                            </button>\n                          )\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </SpinnerLoader>\n          ) : (\n            <div id=\"servv-billing-payment-element\" />\n          )}\n        </div>\n\n        {/* Actions */}\n        {!loading && billingPlans && (\n          <div className={`servv_actions mt-auto`}>\n            {/* {goToPreviousStep && (\n              <button\n                type=\"button\"\n                className=\"servv_button servv_button--secondary\"\n                onClick={goToPreviousStep}\n                disabled={loading || parentLoading}\n              >\n                Previous\n              </button>\n            )} */}\n\n            <button\n              type=\"button\"\n              className=\"servv_button servv_button--primary\"\n              onClick={goToNextStep}\n              disabled={loading || parentLoading}\n            >\n              {parentLoading ? \"Saving...\" : \"Continue\"}\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Payment Options Modal */}\n      {showPaymentOptionsModal && selectedPlan && (\n        <ModalShell\n          title={`Activate ${selectedPlan.name}`}\n          onClose={() => {\n            setShowPaymentOptionsModal(false);\n            setSelectedPlan(null);\n          }}\n        >\n          <div className=\"flex flex-col gap-y-[16px] p-[24px]\">\n            {selectedPlan.application_fee_percent > 0 && (\n              <p className=\"step__description\">\n                This plan includes a {selectedPlan.application_fee_percent}%\n                transaction fee.\n              </p>\n            )}\n\n            <div className=\"flex flex-col gap-y-[12px]\">\n              {selectedPlan.price > 0 && (\n                <button\n                  type=\"button\"\n                  className=\"servv_button servv_button--primary w-full\"\n                  onClick={() => activateBillingPlan(selectedPlan.id)}\n                >\n                  Monthly — ${selectedPlan.price}/mo\n                </button>\n              )}\n\n              {selectedPlan.price_annual > 0 && (\n                <button\n                  type=\"button\"\n                  className=\"servv_button servv_button--secondary w-full\"\n                  onClick={() => activateBillingPlan(selectedPlan.id, true)}\n                >\n                  Annual — ${selectedPlan.price_annual}/yr\n                </button>\n              )}\n            </div>\n\n            <button\n              type=\"button\"\n              className=\"servv_button servv_button--secondary w-full\"\n              onClick={() => {\n                setShowPaymentOptionsModal(false);\n                setSelectedPlan(null);\n              }}\n            >\n              Cancel\n            </button>\n          </div>\n        </ModalShell>\n      )}\n    </div>\n  );\n};\n\nexport default BillingStep;\n","import React from \"react\";\nimport Spinner from \"../Menu/Spinner\";\n\nconst SpinnerLoader = ({ isLoading, children, customStyling }) => {\n  return (\n    <div className=\"relative\">\n      <div className={isLoading ? \"blur-sm pointer-events-none\" : \"\"}>\n        {children}\n      </div>\n      {isLoading && (\n        <div\n          className={`absolute inset-0 flex items-center justify-center ${customStyling}`}\n        >\n          <Spinner loading={true} />\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SpinnerLoader;\n","import * as React from \"react\";\nfunction CheckCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CheckCircleIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction XCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XCircleIcon);\nexport default ForwardRef;","var RELEASE_TRAIN = 'acacia';\n\nvar runtimeVersionToUrlVersion = function runtimeVersionToUrlVersion(version) {\n  return version === 3 ? 'v3' : version;\n};\n\nvar ORIGIN = 'https://js.stripe.com';\nvar STRIPE_JS_URL = \"\".concat(ORIGIN, \"/\").concat(RELEASE_TRAIN, \"/stripe.js\");\nvar V3_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/v3\\/?(\\?.*)?$/;\nvar STRIPE_JS_URL_REGEX = /^https:\\/\\/js\\.stripe\\.com\\/(v3|[a-z]+)\\/stripe\\.js(\\?.*)?$/;\nvar EXISTING_SCRIPT_MESSAGE = 'loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used';\n\nvar isStripeJSURL = function isStripeJSURL(url) {\n  return V3_URL_REGEX.test(url) || STRIPE_JS_URL_REGEX.test(url);\n};\n\nvar findScript = function findScript() {\n  var scripts = document.querySelectorAll(\"script[src^=\\\"\".concat(ORIGIN, \"\\\"]\"));\n\n  for (var i = 0; i < scripts.length; i++) {\n    var script = scripts[i];\n\n    if (!isStripeJSURL(script.src)) {\n      continue;\n    }\n\n    return script;\n  }\n\n  return null;\n};\n\nvar injectScript = function injectScript(params) {\n  var queryString = params && !params.advancedFraudSignals ? '?advancedFraudSignals=false' : '';\n  var script = document.createElement('script');\n  script.src = \"\".concat(STRIPE_JS_URL).concat(queryString);\n  var headOrBody = document.head || document.body;\n\n  if (!headOrBody) {\n    throw new Error('Expected document.body not to be null. Stripe.js requires a <body> element.');\n  }\n\n  headOrBody.appendChild(script);\n  return script;\n};\n\nvar registerWrapper = function registerWrapper(stripe, startTime) {\n  if (!stripe || !stripe._registerWrapper) {\n    return;\n  }\n\n  stripe._registerWrapper({\n    name: 'stripe-js',\n    version: \"6.1.0\",\n    startTime: startTime\n  });\n};\n\nvar stripePromise$1 = null;\nvar onErrorListener = null;\nvar onLoadListener = null;\n\nvar onError = function onError(reject) {\n  return function (cause) {\n    reject(new Error('Failed to load Stripe.js', {\n      cause: cause\n    }));\n  };\n};\n\nvar onLoad = function onLoad(resolve, reject) {\n  return function () {\n    if (window.Stripe) {\n      resolve(window.Stripe);\n    } else {\n      reject(new Error('Stripe.js not available'));\n    }\n  };\n};\n\nvar loadScript = function loadScript(params) {\n  // Ensure that we only attempt to load Stripe.js at most once\n  if (stripePromise$1 !== null) {\n    return stripePromise$1;\n  }\n\n  stripePromise$1 = new Promise(function (resolve, reject) {\n    if (typeof window === 'undefined' || typeof document === 'undefined') {\n      // Resolve to null when imported server side. This makes the module\n      // safe to import in an isomorphic code base.\n      resolve(null);\n      return;\n    }\n\n    if (window.Stripe && params) {\n      console.warn(EXISTING_SCRIPT_MESSAGE);\n    }\n\n    if (window.Stripe) {\n      resolve(window.Stripe);\n      return;\n    }\n\n    try {\n      var script = findScript();\n\n      if (script && params) {\n        console.warn(EXISTING_SCRIPT_MESSAGE);\n      } else if (!script) {\n        script = injectScript(params);\n      } else if (script && onLoadListener !== null && onErrorListener !== null) {\n        var _script$parentNode;\n\n        // remove event listeners\n        script.removeEventListener('load', onLoadListener);\n        script.removeEventListener('error', onErrorListener); // if script exists, but we are reloading due to an error,\n        // reload script to trigger 'load' event\n\n        (_script$parentNode = script.parentNode) === null || _script$parentNode === void 0 ? void 0 : _script$parentNode.removeChild(script);\n        script = injectScript(params);\n      }\n\n      onLoadListener = onLoad(resolve, reject);\n      onErrorListener = onError(reject);\n      script.addEventListener('load', onLoadListener);\n      script.addEventListener('error', onErrorListener);\n    } catch (error) {\n      reject(error);\n      return;\n    }\n  }); // Resets stripePromise on error\n\n  return stripePromise$1[\"catch\"](function (error) {\n    stripePromise$1 = null;\n    return Promise.reject(error);\n  });\n};\nvar initStripe = function initStripe(maybeStripe, args, startTime) {\n  if (maybeStripe === null) {\n    return null;\n  }\n\n  var pk = args[0];\n  var isTestKey = pk.match(/^pk_test/); // @ts-expect-error this is not publicly typed\n\n  var version = runtimeVersionToUrlVersion(maybeStripe.version);\n  var expectedVersion = RELEASE_TRAIN;\n\n  if (isTestKey && version !== expectedVersion) {\n    console.warn(\"Stripe.js@\".concat(version, \" was loaded on the page, but @stripe/stripe-js@\").concat(\"6.1.0\", \" expected Stripe.js@\").concat(expectedVersion, \". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning\"));\n  }\n\n  var stripe = maybeStripe.apply(undefined, args);\n  registerWrapper(stripe, startTime);\n  return stripe;\n}; // eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\n\nvar stripePromise;\nvar loadCalled = false;\n\nvar getStripePromise = function getStripePromise() {\n  if (stripePromise) {\n    return stripePromise;\n  }\n\n  stripePromise = loadScript(null)[\"catch\"](function (error) {\n    // clear cache on error\n    stripePromise = null;\n    return Promise.reject(error);\n  });\n  return stripePromise;\n}; // Execute our own script injection after a tick to give users time to do their\n// own script injection.\n\n\nPromise.resolve().then(function () {\n  return getStripePromise();\n})[\"catch\"](function (error) {\n  if (!loadCalled) {\n    console.warn(error);\n  }\n});\nvar loadStripe = function loadStripe() {\n  for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n    args[_key] = arguments[_key];\n  }\n\n  loadCalled = true;\n  var startTime = Date.now(); // if previous attempts are unsuccessful, will re-load script\n\n  return getStripePromise().then(function (maybeStripe) {\n    return initStripe(maybeStripe, args, startTime);\n  });\n};\n\nexport { loadStripe };\n","export * from '../dist/index.mjs';\n"],"names":["React","useState","useEffect","axios","toast","loadStripe","CreditCardIcon","CheckCircleIcon","XCircleIcon","ModalShell","SpinnerLoader","jsx","_jsx","jsxs","_jsxs","BillingStep","attributes","setAttributes","goToNextStep","goToPreviousStep","onSave","loading","parentLoading","settings","billingPlans","setBillingPlans","setLoading","showPaymentForm","setShowPaymentForm","showPaymentOptionsModal","setShowPaymentOptionsModal","selectedPlan","setSelectedPlan","stripeForm","setStripeForm","getBillingPlans","response","headers","servvData","nonce","catch","status","data","plans","activateBillingPlan","id","isAnnual","method","url","is_annual","client_secret","public_key","stripe","handleComplete","checkout","destroy","planActivated","planId","initEmbeddedCheckout","clientSecret","onComplete","mount","showPaymentOptions","plan","handleContinue","activePlanId","current_plan","className","children","isLoading","customStyling","map","isCurrent","isUpgradeable","name","price","price_annual","application_fee_percent","features","feature","index","value","title","type","onClick","disabled","onClose","Spinner"],"sourceRoot":""}